@if(plan()){
  <section class="flex flex-col gap-6 p-6 bg-gray-50 min-h-screen">
    <h1 class="text-2xl font-bold mb-4">Información del Plan de Mejora</h1>
    <div class="bg-white rounded-2xl shadow-lg p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <p><span class="font-bold text-gray-700">Nombre:</span> {{plan()?.name}}</p>
        <p><span class="font-bold text-gray-700">Estado:</span>
          <span class="px-2 py-1 rounded-full text-sm"
                [ngClass]="{
                  'bg-green-100 text-green-700': plan()?.status === 'Aprobado',
                  'bg-yellow-100 text-yellow-700': plan()?.status === 'Pendiente'
                }">
            {{plan()?.status}}
          </span>
        </p>
        <p><span class="font-bold text-gray-700">Fecha de creación:</span> {{plan()?.create_date}}</p>
        <p><span class="font-bold text-gray-700">Año académico:</span> {{plan()?.academic_year}}</p>
      </div>
      <p class="mt-4"><span class="font-bold text-gray-700">Descripción:</span> {{plan()?.description}}</p>
    </div>

    <h2 class="text-xl font-bold ">Acciones</h2>

    <div class="grid gap-6">
      @for(action of plan()?.actions; track action; let i = $index){
        <div class="bg-white rounded-xl shadow-md p-5 ">
          <h3 class="text-lg font-semibold text-blue-700 mb-3">Acción {{i + 1}}: {{action.name}}</h3>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <p><span class="font-semibold">Origen:</span> {{action.origin}}</p>
            @if(action.origin === "Recomendación ACCUA"){
              <p><span class="font-semibold">Recomendaciones ACCUA:</span> {{action.accua_recommendations}}</p>
            }
            <p class="mt-2"><span class="font-semibold">Criterios Guía IMPLANTA:</span> {{action.criterios}}</p>
            <p class="mt-2"><span class="font-semibold">Descripción:</span> {{action.description}}</p>
            <p class="mt-2"><span class="font-semibold">Objetivos:</span> {{action.objectives}}</p>
            <p class="mt-2"><span class="font-semibold">Alcance:</span> {{action.scope}}</p>
            <p><span class="font-semibold">Prioridad:</span>
              <span class="px-2 py-1 rounded-md bg-indigo-100 text-indigo-700">{{action.priority || 'N/A'}}</span>
            </p>
            <p><span class="font-semibold">Fecha inicio:</span> {{action.start_date || '—'}}</p>
            <p><span class="font-semibold">Fecha fin:</span> {{action.end_date || '—'}}</p>
          </div>

          <div class="mt-4">
            <h4 class="text-md font-semibold text-gray-700 mb-2">Indicadores</h4>
            <div class="grid gap-3">
              @for(indicator of action.indicators; track indicator){
                <div class="bg-gray-50 border rounded-lg p-3">
                  <p><span class="font-semibold">Nombre:</span> {{indicator.name}}</p>
                  <p><span class="font-semibold">Valor inicial:</span> {{indicator.start_value}}</p>
                  <p><span class="font-semibold">Valor objetivo:</span> {{indicator.objective_value}}</p>
                </div>
              }
            </div>
          </div>
        </div>
      }
    </div>

  </section>
}
